# ğŸ¯ Nome que aparece na aba 'Actions' do GitHub
name: Deploy React/Vite to GitHub Pages

# ğŸ”” Gatilho: Quando este workflow deve ser executado
on:
  # Roda o workflow quando hÃ¡ um push na branch 'main'
  push:
    branches:
      - main
  # Permite que vocÃª o acione manualmente na aba Actions
  workflow_dispatch:

# ğŸ”’ PermissÃµes necessÃ¡rias para que o Action possa fazer o deploy
permissions:
  contents: read # Permite ler os arquivos do repositÃ³rio
  pages: write # Permite escrever no ambiente GitHub Pages
  id-token: write # NecessÃ¡rio para autenticaÃ§Ã£o com as Pages

# ğŸ› ï¸ DefiniÃ§Ã£o das Tarefas (Jobs)
jobs:
  # 1. Job de CompilaÃ§Ã£o (Build)
  build:
    runs-on: ubuntu-latest # Roda em um servidor virtual Linux
    steps:
      # Etapa 1: Faz o checkout do cÃ³digo
      - name: Checkout Code
        uses: actions/checkout@v4

      # Etapa 2: Configura o ambiente Node.js
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 20 # Recomendado usar uma versÃ£o LTS
          cache: "npm" # Otimiza a instalaÃ§Ã£o de dependÃªncias

      # Etapa 3: Instala as dependÃªncias do projeto
      - name: Install Dependencies
        run: npm install

      # Etapa 4: Compila o projeto (cria a pasta 'dist')
      - name: Build Project (Vite)
        run: npm run build

      # Etapa 5: Salva a pasta 'dist' como um "Artefato de PÃ¡gina"
      # O deploy usa este artefato na prÃ³xima etapa
      - name: Upload Pages Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: "./dist" # Deve corresponder ao 'outDir' do vite.config.ts

  # 2. Job de ImplantaÃ§Ã£o (Deploy)
  deploy:
    # âš ï¸ Depende do sucesso do job 'build'
    needs: build

    # â³ Define o ambiente de deploy (usado pelo GitHub Pages)
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    runs-on: ubuntu-latest
    steps:
      # Etapa 1: Faz a implantaÃ§Ã£o dos arquivos que foram carregados como artefato
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
